
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zoom Party</title>
  <link rel="stylesheet" href="zoomparty.css">
  <style>
  section.party { -o-transition: font-size 5s linear; -webkit-transition: font-size 5s linear; -moz-transition: font-size 5s linear; transition: font-size 5s linear;}
  section.party.active { font-size: 120px; }
  </style>
</head>
<body>
    <pre>.party { transition: font-size 5s linear; }
.party.active { font-size: 120px; }</pre>
<pre>party.addEventListener('transitionend', animate, false);</pre>
  <section class="party">
  </section>
<script>
(function() {
  var styles = [],
      style = document.createElement('style'),
      fragment = document.createDocumentFragment(),
      parent = document.querySelector('.party'),
      elmtxt, elm;

  for (var i = 0, l = 50; i < l; i++) {
      elm = document.createElement('b');
      elmtxt = document.createElement('i');
      elmtxt.textContent = i;
      elm.appendChild(elmtxt);
      fragment.appendChild(elm);
      styles.push('b:nth-of-type(' + (i + 1) + ') { left: ' + Math.random() * 10 + 'em; top: '+ Math.random() * 10 + 'em; }');
      fragment.appendChild(elm);
  }

  style.textContent = styles.join('');

  document.head.appendChild(style);
  parent.appendChild(fragment);
  setTimeout(function() {parent.classList.add('active'); }, 0, false);

  parent.addEventListener( 'webkitTransitionEnd', reanimate, false );
  parent.addEventListener( 'oTransitionEnd', reanimate, false );
  parent.addEventListener( 'transitionend', reanimate, false );

  function reanimate() {
    if(parent.classList.contains('active')) {
      parent.classList.remove('active')
    } else {
      parent.classList.add('active');
    }
  }
})();
</script>
</body>
</html>
